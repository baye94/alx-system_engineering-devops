#!/bin/bash
# shellcheck disable=SC2086

# Function to get info of a subdomain
get_subdomain_info() {
    local domain=$1
    local subdomain=$2
    result=$(dig ${subdomain}.${domain} +short)
    record_type=$(dig ${subdomain}.${domain} | awk '/ANSWER SECTION/ {getline; print $4}')
    echo "The subdomain ${subdomain} is a ${record_type} record and points to ${result}"
}

# Check if at least the domain is provided
if [ -z "$1" ]; then
    echo "Usage: $0 domain [subdomain]"
    exit 1
fi

domain=$1
sub=$2

# If only domain is provided, check predefined subdomains
if [ -z "$sub" ]; then
    for subdomain in www lb-01 web-01 web-02; do
        get_subdomain_info $domain $subdomain
    done
else
    get_subdomain_info $domain $sub
fi
